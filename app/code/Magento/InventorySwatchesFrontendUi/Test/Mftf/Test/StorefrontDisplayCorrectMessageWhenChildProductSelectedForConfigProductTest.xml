<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright © Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->
<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/testSchema.xsd">
    <test name="StorefrontDisplayCorrectMessageWhenChildProductSelectedForConfigProductTest">
        <annotations>
            <features value="ConfigurableProduct"/>
            <stories value="Configurable Product Child Quantity"/>
            <title value="Display 'Only X left' message when a child product is selected on Configurable product page on the Storefront"/>
            <description value="Display 'Only X left' message when a child product is selected on Configurable product page on the Storefront"/>
            <testCaseId value="MC-17951"/>
            <useCaseId value="MC-17694"/>
            <severity value="MAJOR"/>
            <group value="сonfigurable_product"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <magentoCLI command="config:set {{StorefrontInventoryCatalogStockThresholdQtyConfigData.path}} {{StorefrontInventoryCatalogStockThresholdQtyConfigData.value}}" stepKey="setQty2"/>
            <createData entity="SimpleSubCategory" stepKey="createCategory"/>
            <comment userInput="Create 1 configurable product with 3 variations" stepKey="commentCreateConfigProducts"/>
            <createData entity="ApiConfigurableProduct" stepKey="createFirstConfigProduct">
                <requiredEntity createDataKey="createCategory"/>
            </createData>
            <createData entity="ApiConfigurableProduct" stepKey="createSecondConfigProduct">
                <requiredEntity createDataKey="createCategory"/>
            </createData>
            <createData entity="ApiConfigurableProduct" stepKey="createThirdConfigProduct">
                <requiredEntity createDataKey="createCategory"/>
            </createData>
            <comment userInput="Create product drop down attribute" stepKey="commentCreateAttribute"/>
            <createData entity="productDropDownAttribute" stepKey="createDropDownAttribute"/>
            <createData entity="productAttributeOption1" stepKey="productAttributeFirstOption">
                <requiredEntity createDataKey="createDropDownAttribute"/>
            </createData>
            <createData entity="productAttributeOption2" stepKey="productAttributeSecondOption">
                <requiredEntity createDataKey="createDropDownAttribute"/>
            </createData>
            <createData entity="productAttributeOption3" stepKey="productAttributeThirdOption">
                <requiredEntity createDataKey="createDropDownAttribute"/>
            </createData>
            <createData entity="AddToDefaultSet" stepKey="addToAttributeSetHandle">
                <requiredEntity createDataKey="createDropDownAttribute"/>
            </createData>
            <comment userInput="Create product swatch attributes" stepKey="commentCreateSwatchAttributes"/>
            <createData entity="productAttributeWithTwoOptions" stepKey="createVisualSwatchAttribute"/>
            <createData entity="productAttributeWithTwoOptions" stepKey="createTextSwatchAttribute"/>
        </before>
        <after>
            <comment userInput="Reset configs" stepKey="commentResetConfigs"/>
            <magentoCLI command="config:set {{StorefrontInventoryCatalogStockThresholdQtyDefaultConfigData.path}} {{StorefrontInventoryCatalogStockThresholdQtyDefaultConfigData.value}}" stepKey="setDefaultValue"/>
            <comment userInput="Delete created data" stepKey="commentDeleteData"/>
            <deleteData createDataKey="createFirstConfigProduct" stepKey="deleteFirstConfigProduct"/>
            <deleteData createDataKey="createSecondConfigProduct" stepKey="deleteSecondConfigProduct"/>
            <deleteData createDataKey="createThirdConfigProduct" stepKey="deleteThirdConfigProduct"/>
            <deleteData createDataKey="createDropDownAttribute" stepKey="deleteDropDownAttribute"/>
            <deleteData createDataKey="createVisualSwatchAttribute" stepKey="deleteVisualSwatchAttribute"/>
            <deleteData createDataKey="createTextSwatchAttribute" stepKey="deleteTextSwatchAttribute"/>
            <deleteData createDataKey="createCategory" stepKey="deleteCategory"/>
            <actionGroup ref="deleteProductUsingProductGrid" stepKey="deleteAllProducts">
                <argument name="product" value="ApiConfigurableProduct"/>
            </actionGroup>
            <actionGroup ref="resetProductGridToDefaultView" stepKey="resetProductGridColumnsInitial"/>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <comment userInput="Generate configurations for first product" stepKey="commentGenerateFirstConfigs"/>
        <amOnPage url="{{AdminProductEditPage.url($$createFirstConfigProduct.id$$)}}" stepKey="navigateToConfigProductPage"/>
        <waitForPageLoad stepKey="waitForProductPageLoad"/>
        <actionGroup ref="SelectAllOptionsForConfigurableProductAttribute" stepKey="generateConfigurationsByAttributeCode">
            <argument name="attributeCode" value="$$createDropDownAttribute.attribute_code$$"/>
        </actionGroup>
        <waitForPageLoad stepKey="waitForBulkImagesPriceQuantityPageLoad"/>
        <comment userInput="Add quantity to product attribute options" stepKey="commentAddQuantity"/>
        <actionGroup ref="addUniqueQuantityToConfigurableProductOption" stepKey="addUniqueQtyForFirstOption">
            <argument name="frontend_label" value="$$createDropDownAttribute.attribute[frontend_labels][0][label]$$"/>
            <argument name="label" value="$$productAttributeFirstOption.option[store_labels][0][label]$$"/>
            <argument name="quantity" value="2"/>
        </actionGroup>
        <actionGroup ref="addUniqueQuantityToConfigurableProductOption" stepKey="addUniqueQtyForSecondOption">
            <argument name="frontend_label" value="$$createDropDownAttribute.attribute[frontend_labels][0][label]$$"/>
            <argument name="label" value="$$productAttributeSecondOption.option[store_labels][0][label]$$"/>
            <argument name="quantity" value="1"/>
        </actionGroup>
        <actionGroup ref="addUniqueQuantityToConfigurableProductOption" stepKey="addUniqueQtyForThirdOption">
            <argument name="frontend_label" value="$$createDropDownAttribute.attribute[frontend_labels][0][label]$$"/>
            <argument name="label" value="$$productAttributeThirdOption.option[store_labels][0][label]$$"/>
            <argument name="quantity" value="3"/>
        </actionGroup>
        <click selector="{{AdminCreateProductConfigurationsPanel.next}}" stepKey="clickOnSecondNextButton"/>
        <waitForPageLoad stepKey="waitForSummaryPageLoad"/>
        <click selector="{{AdminCreateProductConfigurationsPanel.next}}" stepKey="clickOnNextButtonToGenerateConfigs"/>
        <waitForPageLoad stepKey="waitForConfigurableProductPageLoad"/>
        <actionGroup ref="saveProductForm" stepKey="saveProduct"/>
        <comment userInput="Check first product options on storefront" stepKey="commentCheckFirstProductOptions"/>
        <amOnPage url="{{StorefrontProductPage.url($$createFirstConfigProduct.custom_attributes[url_key]$$)}}" stepKey="openProductPage"/>
        <waitForPageLoad stepKey="waitForStorefrontFirstProductPage"/>
        <selectOption selector="{{StorefrontProductInfoMainSection.attributeSelectByAttributeID($$createDropDownAttribute.attribute[frontend_labels][0][label]$$)}}" userInput="$$productAttributeFirstOption.option[store_labels][0][label]$$" stepKey="selectFirstOption"/>
        <waitForAjaxLoad stepKey="waitForElementVisible1"/>
        <see selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 2 left" stepKey="seeFirstOptionQty"/>
        <selectOption selector="{{StorefrontProductInfoMainSection.attributeSelectByAttributeID($$createDropDownAttribute.attribute[frontend_labels][0][label]$$)}}" userInput="$$productAttributeSecondOption.option[store_labels][0][label]$$" stepKey="selectSecondOption"/>
        <waitForAjaxLoad stepKey="waitForElementVisible2"/>
        <see selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 1 left" stepKey="seeSecondOptionQty"/>
        <selectOption selector="{{StorefrontProductInfoMainSection.attributeSelectByAttributeID($$createDropDownAttribute.attribute[frontend_labels][0][label]$$)}}" userInput="$$productAttributeThirdOption.option[store_labels][0][label]$$" stepKey="selectThirdOption"/>
        <dontSee selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 2 left" stepKey="seeThirdOptionQty"/>
        <comment userInput="Add first product third variation to cart and place for order" stepKey="commentPlaceFirstOrder"/>
        <actionGroup ref="StorefrontAddToCartCustomOptionsProductPageActionGroup" stepKey="addProductToCard">
            <argument name="productName" value="$$createFirstConfigProduct.name$$"/>
        </actionGroup>
        <actionGroup ref="GoToCheckoutFromMinicartActionGroup" stepKey="goToCheckoutFromMinicart"/>
        <actionGroup ref="GuestCheckoutFillingShippingSectionActionGroup" stepKey="guestCheckout">
            <argument name="customerVar" value="Simple_US_Customer" />
            <argument name="customerAddressVar" value="CustomerAddressSimple" />
        </actionGroup>
        <actionGroup ref="CheckoutSelectCheckMoneyOrderPaymentActionGroup" stepKey="selectCheckMoneyPayment"/>
        <actionGroup ref="CheckoutPlaceOrderActionGroup" stepKey="placeOrder">
            <argument name="orderNumberMessage" value="CONST.successGuestCheckoutOrderNumberMessage" />
            <argument name="emailYouMessage" value="CONST.successCheckoutEmailYouMessage"/>
        </actionGroup>
        <amOnPage url="{{StorefrontProductPage.url($$createFirstConfigProduct.custom_attributes[url_key]$$)}}" stepKey="openProductPageSecondTime"/>
        <waitForPageLoad stepKey="waitForStorefrontFirstProductPageSecondTime"/>
        <selectOption selector="{{StorefrontProductInfoMainSection.attributeSelectByAttributeID($$createDropDownAttribute.attribute[frontend_labels][0][label]$$)}}" userInput="$$productAttributeThirdOption.option[store_labels][0][label]$$" stepKey="selectThirdOptionSecondTime"/>
        <waitForAjaxLoad stepKey="waitForElementVisible3"/>
        <see selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 2 left" stepKey="seeThirdOptionQtySecondTime"/>
        <comment userInput="Configure visual swatch attribute" stepKey="commentConfigureSecondAttribute"/>
        <actionGroup ref="navigateToEditProductAttribute" stepKey="goToEditPage">
            <argument name="ProductAttribute" value="$$createVisualSwatchAttribute.attribute[frontend_labels][0][label]$$"/>
        </actionGroup>
        <selectOption selector="{{AttributePropertiesSection.InputType}}" stepKey="checkInputType" userInput="{{visualSwatchAttribute.input_type}}"/>
        <actionGroup ref="FillSwatchAdminFiledAddByIndex" stepKey="fillFirstSwatch">
            <argument name="swatchValue" value="{{visualSwatchOption1.admin_label}}"/>
            <argument name="index" value="0"/>
        </actionGroup>
        <actionGroup ref="FillSwatchAdminFiledAddByIndex" stepKey="fillSecondSwatch">
            <argument name="swatchValue" value="{{visualSwatchOption2.admin_label}}"/>
            <argument name="index" value="1"/>
        </actionGroup>
        <actionGroup ref="FillSwatchAdminFiledAddByIndex" stepKey="fillThirdSwatch">
            <argument name="swatchValue" value="{{visualSwatchOption3.admin_label}}"/>
            <argument name="index" value="2"/>
        </actionGroup>
        <click selector="{{AttributePropertiesSection.Save}}" stepKey="saveAttribute"/>
        <comment userInput="Generate configurations for second product" stepKey="commentGenerateSecondConfigs"/>
        <amOnPage url="{{AdminProductEditPage.url($$createSecondConfigProduct.id$$)}}" stepKey="navigateToSecondConfigProductPage"/>
        <waitForPageLoad stepKey="waitForSecondProductPageLoad"/>
        <actionGroup ref="SelectAllOptionsForConfigurableProductAttribute" stepKey="generateSecondConfigurationsByAttributeCode">
            <argument name="attributeCode" value="$$createVisualSwatchAttribute.attribute_code$$"/>
        </actionGroup>
        <waitForPageLoad stepKey="waitForBulkPriceQuantityPageLoad"/>
        <comment userInput="Add quantity to product visual swatch attribute options" stepKey="commentAddQuantityVisualSwatch"/>
        <actionGroup ref="addUniqueQuantityToConfigurableProductOption" stepKey="addUniqueQtyForFirstVisualSwatchOption">
            <argument name="frontend_label" value="$$createVisualSwatchAttribute.attribute[frontend_labels][0][label]$$"/>
            <argument name="label" value="{{visualSwatchOption1.admin_label}}"/>
            <argument name="quantity" value="2"/>
        </actionGroup>
        <actionGroup ref="addUniqueQuantityToConfigurableProductOption" stepKey="addUniqueQtyForSecondVisualSwatchOption">
            <argument name="frontend_label" value="$$createVisualSwatchAttribute.attribute[frontend_labels][0][label]$$"/>
            <argument name="label" value="{{visualSwatchOption2.admin_label}}"/>
            <argument name="quantity" value="1"/>
        </actionGroup>
        <actionGroup ref="addUniqueQuantityToConfigurableProductOption" stepKey="addUniqueQtyForThirdVisualSwatchOption">
            <argument name="frontend_label" value="$$createVisualSwatchAttribute.attribute[frontend_labels][0][label]$$"/>
            <argument name="label" value="{{visualSwatchOption3.admin_label}}"/>
            <argument name="quantity" value="3"/>
        </actionGroup>
        <click selector="{{AdminCreateProductConfigurationsPanel.next}}" stepKey="clickOnSecondNextButtonSecondTime"/>
        <waitForPageLoad stepKey="waitForSummaryPageLoadSecondTime"/>
        <click selector="{{AdminCreateProductConfigurationsPanel.next}}" stepKey="clickOnNextButtonToGenerateConfigsSecondTime"/>
        <waitForPageLoad stepKey="waitForConfigurableProductPageLoadSecondTime"/>
        <actionGroup ref="saveConfiguredProduct" stepKey="saveSecondProductForm"/>
        <comment userInput="Check second product options on storefront" stepKey="commentCheckSecondProductOptions"/>
        <amOnPage url="{{StorefrontProductPage.url($$createSecondConfigProduct.custom_attributes[url_key]$$)}}" stepKey="openSecondProductPage"/>
        <waitForPageLoad stepKey="waitForStorefrontSecondProductPage"/>
        <click selector="{{StorefrontProductInfoMainSection.swatchOptionByLabel(visualSwatchOption1.admin_label)}}" stepKey="clickFirstSwatchOption"/>
        <waitForAjaxLoad stepKey="waitForElementVisible4"/>
        <see selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 2 left" stepKey="seeFirstSwatchOptionQty"/>
        <click selector="{{StorefrontProductInfoMainSection.swatchOptionByLabel(visualSwatchOption2.admin_label)}}" stepKey="clickSecondSwatchOption"/>
        <waitForAjaxLoad stepKey="waitForElementVisible5"/>
        <see selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 1 left" stepKey="seeSecondSwatchOptionQty"/>
        <click selector="{{StorefrontProductInfoMainSection.swatchOptionByLabel(visualSwatchOption3.admin_label)}}" stepKey="clickThirdSwatchOption"/>
        <dontSee selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 2 left" stepKey="seeThirdSwatchOptionQty"/>
        <comment userInput="Add second product third variation to cart and place for order" stepKey="commentPlaceSecondOrder"/>
        <actionGroup ref="StorefrontAddToCartCustomOptionsProductPageActionGroup" stepKey="addSecondProductToCard">
            <argument name="productName" value="$$createSecondConfigProduct.name$$"/>
        </actionGroup>
        <actionGroup ref="GoToCheckoutFromMinicartActionGroup" stepKey="goToCheckoutFromMinicartSecondTime"/>
        <actionGroup ref="GuestCheckoutFillingShippingSectionActionGroup" stepKey="guestCheckoutSecondTime">
            <argument name="customerVar" value="Simple_US_Customer" />
            <argument name="customerAddressVar" value="CustomerAddressSimple" />
        </actionGroup>
        <actionGroup ref="CheckoutSelectCheckMoneyOrderPaymentActionGroup" stepKey="selectCheckMoneyPaymentSecondTime"/>
        <actionGroup ref="CheckoutPlaceOrderActionGroup" stepKey="placeOrderSecondTime">
            <argument name="orderNumberMessage" value="CONST.successGuestCheckoutOrderNumberMessage" />
            <argument name="emailYouMessage" value="CONST.successCheckoutEmailYouMessage"/>
        </actionGroup>
        <amOnPage url="{{StorefrontProductPage.url($$createSecondConfigProduct.custom_attributes[url_key]$$)}}" stepKey="openSecondProductPageSecondTime"/>
        <waitForPageLoad stepKey="waitForStorefrontSecondProductPageSecondTime"/>
        <waitForAjaxLoad stepKey="waitForElementVisible6"/>
        <click selector="{{StorefrontProductInfoMainSection.swatchOptionByLabel(visualSwatchOption3.admin_label)}}" stepKey="clickThirdSwatchOptionSecondTime"/>
        <waitForAjaxLoad stepKey="waitForElementVisible10"/>
        <see selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 2 left" stepKey="seeThirdSwatchOptionQtySecondTime"/>
        <comment userInput="Configure text swatch attribute" stepKey="commentConfigureThirdAttribute"/>
        <actionGroup ref="navigateToEditProductAttribute" stepKey="goToThirdAttributeEditPage">
            <argument name="ProductAttribute" value="$$createTextSwatchAttribute.attribute[frontend_labels][0][label]$$"/>
        </actionGroup>
        <selectOption selector="{{AttributePropertiesSection.InputType}}" userInput="{{textSwatchAttribute.input_type}}" stepKey="checkThirdAttributeInputType" />
        <actionGroup ref="FillSwatchAdminFiledAddByIndexWitDescription" stepKey="fillFirstTextSwatch">
            <argument name="swatchValue" value="{{textSwatchOption1.admin_label}}"/>
            <argument name="index" value="0"/>
            <argument name="description" value="{{textSwatchOption1.description}}"/>
        </actionGroup>
        <actionGroup ref="FillSwatchAdminFiledAddByIndexWitDescription" stepKey="fillSecondTextSwatch">
            <argument name="swatchValue" value="{{textSwatchOption2.admin_label}}"/>
            <argument name="index" value="1"/>
            <argument name="description" value="{{textSwatchOption2.description}}"/>
        </actionGroup>
        <actionGroup ref="FillSwatchAdminFiledAddByIndexWitDescription" stepKey="fillThirdTextSwatch">
            <argument name="swatchValue" value="{{textSwatchOption3.admin_label}}"/>
            <argument name="index" value="2"/>
            <argument name="description" value="{{textSwatchOption3.description}}"/>
        </actionGroup>
        <click selector="{{AttributePropertiesSection.Save}}" stepKey="saveThirdAttribute"/>
        <comment userInput="Generate configurations for third product" stepKey="commentGenerateThirdConfigs"/>
        <amOnPage url="{{AdminProductEditPage.url($$createThirdConfigProduct.id$$)}}" stepKey="navigateToThirdConfigProductPage"/>
        <waitForPageLoad stepKey="waitForThirdProductPageLoad"/>
        <actionGroup ref="SelectAllOptionsForConfigurableProductAttribute" stepKey="generateThirdConfigurationsByAttributeCode">
            <argument name="attributeCode" value="$$createTextSwatchAttribute.attribute_code$$"/>
        </actionGroup>
        <waitForPageLoad stepKey="waitForBulkPriceQuantityPageLoadThirdTime"/>
        <comment userInput="Add quantity to product text swatch attribute options" stepKey="commentAddQuantityTextSwatch"/>
        <actionGroup ref="addUniqueQuantityToConfigurableProductOption" stepKey="addUniqueQtyForFirstTextSwatchOption">
            <argument name="frontend_label" value="$$createTextSwatchAttribute.attribute[frontend_labels][0][label]$$"/>
            <argument name="label" value="{{textSwatchOption1.admin_label}}"/>
            <argument name="quantity" value="2"/>
        </actionGroup>
        <actionGroup ref="addUniqueQuantityToConfigurableProductOption" stepKey="addUniqueQtyForSecondTextSwatchOption">
            <argument name="frontend_label" value="$$createTextSwatchAttribute.attribute[frontend_labels][0][label]$$"/>
            <argument name="label" value="{{textSwatchOption2.admin_label}}"/>
            <argument name="quantity" value="1"/>
        </actionGroup>
        <actionGroup ref="addUniqueQuantityToConfigurableProductOption" stepKey="addUniqueQtyForThirdTextSwatchOption">
            <argument name="frontend_label" value="$$createTextSwatchAttribute.attribute[frontend_labels][0][label]$$"/>
            <argument name="label" value="{{textSwatchOption3.admin_label}}"/>
            <argument name="quantity" value="3"/>
        </actionGroup>
        <click selector="{{AdminCreateProductConfigurationsPanel.next}}" stepKey="clickOnSecondNextButtonThirdTime"/>
        <waitForPageLoad stepKey="waitForSummaryPageLoadThirdTime"/>
        <click selector="{{AdminCreateProductConfigurationsPanel.next}}" stepKey="clickOnNextButtonToGenerateConfigsThirdTime"/>
        <waitForPageLoad stepKey="waitForConfigurableProductPageLoadThirdTime"/>
        <actionGroup ref="saveConfiguredProduct" stepKey="saveThirdProductForm"/>
        <comment userInput="Check third product options on storefront" stepKey="commentCheckThirdProductOptions"/>
        <amOnPage url="{{StorefrontProductPage.url($$createThirdConfigProduct.custom_attributes[url_key]$$)}}" stepKey="openThirdProductPage"/>
        <waitForPageLoad stepKey="waitForStorefrontThirdProductPage"/>
        <click selector="{{StorefrontProductInfoMainSection.swatchOptionByLabel(textSwatchOption1.admin_label)}}" stepKey="clickFirstTextSwatchOption"/>
        <waitForAjaxLoad stepKey="waitForElementVisible7"/>
        <see selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 2 left" stepKey="seeFirstTextSwatchOptionQty"/>
        <click selector="{{StorefrontProductInfoMainSection.swatchOptionByLabel(textSwatchOption2.admin_label)}}" stepKey="clickSecondTextSwatchOption"/>
        <waitForAjaxLoad stepKey="waitForElementVisible8"/>
        <see selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 1 left" stepKey="seeSecondTextSwatchOptionQty"/>
        <click selector="{{StorefrontProductInfoMainSection.swatchOptionByLabel(textSwatchOption3.admin_label)}}" stepKey="clickThirdTextSwatchOption"/>
        <dontSee selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 2 left" stepKey="seeThirdTextSwatchOptionQty"/>
        <comment userInput="Add third product third variation to cart and place for order" stepKey="commentPlaceThirdOrder"/>
        <actionGroup ref="StorefrontAddToCartCustomOptionsProductPageActionGroup" stepKey="addThirdProductToCard">
            <argument name="productName" value="$$createThirdConfigProduct.name$$"/>
        </actionGroup>
        <actionGroup ref="GoToCheckoutFromMinicartActionGroup" stepKey="goToCheckoutFromMinicartThirdTime"/>
        <actionGroup ref="GuestCheckoutFillingShippingSectionActionGroup" stepKey="guestCheckoutThirdTime">
            <argument name="customerVar" value="Simple_US_Customer" />
            <argument name="customerAddressVar" value="CustomerAddressSimple" />
        </actionGroup>
        <actionGroup ref="CheckoutSelectCheckMoneyOrderPaymentActionGroup" stepKey="selectCheckMoneyPaymentThirdTime"/>
        <actionGroup ref="CheckoutPlaceOrderActionGroup" stepKey="placeOrderThirdTime">
            <argument name="orderNumberMessage" value="CONST.successGuestCheckoutOrderNumberMessage" />
            <argument name="emailYouMessage" value="CONST.successCheckoutEmailYouMessage"/>
        </actionGroup>
        <amOnPage url="{{StorefrontProductPage.url($$createThirdConfigProduct.custom_attributes[url_key]$$)}}" stepKey="openProductPageThirdTime"/>
        <waitForPageLoad stepKey="waitForStorefrontFirstProductPageThirdTime"/>
        <click selector="{{StorefrontProductInfoMainSection.swatchOptionByLabel(textSwatchOption3.admin_label)}}" stepKey="clickThirdSwatchOptionThirdTime"/>
        <waitForAjaxLoad stepKey="waitForElementVisible9"/>
        <see selector="{{StorefrontProductInfoMainSection.configurableVariationQty}}" userInput="Only 2 left" stepKey="seeThirdSwatchOptionQtyThirdTime"/>
    </test>
</tests>
